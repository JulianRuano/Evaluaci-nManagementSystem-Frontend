import{a as k,b as E,p as A,r as x,y as P,j as e,T as I,v as w,z as O,A as M,I as B,B as C,w as T,i as H,u as L,k as R,C as z,n as $,o as q,S as Q,M as V,F as G,D as _,g as J,h as d,E as c,L as U,t as W,Q as S}from"./index-f4f1ada5.js";import{H as X}from"./main-72d553bd.js";async function Y(n){const o={withCredentials:!0};return(await k.post(`${E}/auth/register`,n,o)).data}const D=({educators:n})=>{const o=x.useRef(null),[m,h]=x.useState(""),[g,f]=x.useState(""),p=(s,t,l)=>{t(),console.log(s[0]),h(s[0]),f(l)},N=s=>{s(),h("")},u=(s,t)=>({filterDropdown:({setSelectedKeys:l,selectedKeys:i,confirm:j,clearFilters:a})=>e.jsxs("div",{style:{padding:8},children:[e.jsx(B,{ref:o,placeholder:`Buscar por ${t}`,value:i[0],onChange:r=>l(r.target.value?[r.target.value]:[]),onPressEnter:()=>p(i,j,s),style:{marginBottom:8,display:"block"}}),e.jsxs(w,{children:[e.jsx(C,{onClick:()=>p(i,j,s),icon:e.jsx(T,{}),size:"small",style:{width:90},className:"bg-highlightColor text-white",children:"Search"}),e.jsx(C,{onClick:()=>a&&N(a),size:"small",style:{width:90},children:"Reset"})]})]}),filterIcon:l=>e.jsx(T,{style:{color:l?"#1890ff":void 0}}),onFilter:(l,i)=>i[s]?i[s].toString().toLowerCase().includes(l.toLowerCase()):"",onFilterDropdownVisibleChange:l=>{l&&setTimeout(()=>o.current.select(),100)},render:l=>g===s?e.jsx(X,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[m],autoEscape:!0,textToHighlight:l?l.toString():""}):l}),y=P(),b=async s=>{y(s)},v=[{title:e.jsx("div",{className:"text-stone-700",children:"Nombres"}),dataIndex:"firstName",key:"firstName",sorter:(s,t)=>s.firstName.localeCompare(t.firstName),sortDirections:["descend","ascend"],...u("firstName","nombres")},{title:e.jsx("div",{className:"text-stone-700",children:"Apellidos"}),dataIndex:"lastName",key:"lastName",sorter:(s,t)=>s.lastName.localeCompare(t.lastName),sortDirections:["descend","ascend"],...u("lastName","apellidos")},{title:e.jsx("div",{className:"text-stone-700",children:"Tipo ID"}),dataIndex:"idType",key:"idType",sorter:(s,t)=>s.idType.localeCompare(t.idType),sortDirections:["descend","ascend"]},{title:e.jsx("div",{className:"text-stone-700",children:"Identificación"}),dataIndex:"identification",key:"identification",sorter:(s,t)=>s.identification.localeCompare(t.identification),sortDirections:["descend","ascend"],...u("identification","identificación")},{title:e.jsx("div",{className:"text-stone-700",children:"Tipo docente"}),dataIndex:"docentType",key:"docentType",sorter:(s,t)=>s.docentType.localeCompare(t.docentType),sortDirections:["descend","ascend"]},{dataIndex:"uid",key:"uid",className:"hidden"},{title:e.jsx("div",{className:"text-stone-700",children:"Estado"}),dataIndex:"isActive",key:"title",sorter:(s,t)=>s.isActive.toString().localeCompare(t.isActive.toString()),sortDirections:["descend","ascend"],render:(s,t)=>e.jsx(w,{size:"middle",children:e.jsx("a",{className:"text-highlightColor",children:e.jsx(O,{color:t.isActive?"green":"red",children:t.isActive?"Activo":"Inactivo"})})})},{title:e.jsx("div",{className:"text-stone-700",children:"Acciones"}),key:"actions",render:(s,t)=>e.jsx(w,{size:"middle",children:e.jsxs("a",{onClick:()=>b(t.uid),className:"text-highlightColor",children:[e.jsx(M,{})," Ver"]})})}];return e.jsx(e.Fragment,{children:e.jsx(I,{locale:{triggerDesc:"Orden descendente",triggerAsc:"Orden ascendente",cancelSort:"Desactivar orden"},pagination:{position:["bottomRight"]},columns:v,dataSource:n})})};D.propTypes={educators:A.array.isRequired};async function Z(n){const o={withCredentials:!0},m=await k.get(`${E}/educators/getEducators/${n}`,o);return console.log("se llamo"),m.data}function K(n){return H({queryKey:["docents"],queryFn:()=>Z(n)})}const te=()=>{const[n,o]=x.useState(!1),[m,h]=x.useState(new Date),g=L(a=>a.auth.user.role);x.useEffect(()=>{console.log(m)},[m,h]);const f=R(),{data:p,isLoading:N,isError:u}=K("docente");x.useEffect(()=>{f(z(p))},[p]);const y=$(),b=a=>S.success(a,{position:"bottom-right",autoClose:3e3,hideProgressBar:!0,pauseOnHover:!1}),v=a=>S.error(a,{position:"bottom-right",autoClose:3e3,hideProgressBar:!0,pauseOnHover:!1}),s=()=>{o(!0)},t=()=>{o(!1)},l=()=>{o(!1)},i=q({mutationFn:Y,onSuccess:a=>{y.invalidateQueries("docents"),o(!1),b("Docente creado con éxito")},onError:async a=>{var r;if(((r=a==null?void 0:a.response)==null?void 0:r.status)===401){await f(W());return}v(a.response.data.message)}}),j=(a,r)=>{const F=r;i.mutate(a,{onSuccess:()=>{F.resetForm({firstName:"",lastName:"",role:"",title:"",identification:"",idType:"",email:"",password:"",docentType:"",labour:""})}})};return N?e.jsx("div",{className:"px-5 py-5",children:Array.from({length:5}).map((a,r)=>e.jsxs("div",{children:[e.jsx(Q,{active:!0}),e.jsx("br",{})]},r))}):u?e.jsx("p",{children:"Ha ocurrido un error"}):e.jsxs("div",{className:"pt-6  text-center",children:[e.jsxs("div",{className:"flex justify-between px-2 mb-2  md:pl-12",children:[e.jsx("h1",{className:"font-semibold pt-1 text-2xl text-stone-700",children:"Docentes"}),g==="Coordinador"?e.jsx("div",{children:e.jsx("button",{className:"  max-w-xs  bg-indigo-500 hover:bg-indigo-700  text-white rounded-lg px-2 py-2 mr-5 font-semibold text-sm",onClick:s,children:"Crear nuevo"})}):null]}),e.jsx(D,{educators:p}),e.jsx(V,{open:n,onOk:t,onCancel:l,okButtonProps:{hidden:!0},cancelButtonProps:{hidden:!0},width:800,centered:!0,children:e.jsx(G,{initialValues:{firstName:"",lastName:"",title:"",identification:"",idType:"",email:"",password:"",docentType:""},validationSchema:_,onSubmit:j,children:({isSubmitting:a})=>e.jsxs(J,{className:" space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-bold text-2xl text-stone-700 ",children:"Nuevo docente"}),e.jsx("p",{children:"A continuacion ingrese los datos del docente"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap -mx-3",children:[e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"firstName",className:"text-xs font-semibold px-1",children:"Nombres"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"text",id:"firstName",name:"firstName",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"Juan Luis"}),e.jsx(c,{className:"text-red-600 text-sm  py-1",name:"firstName",component:"div"})]})]}),e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"lastName",className:"text-xs font-semibold",children:"Apellidos"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"text",id:"lastName",name:"lastName",className:"w-full pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"Gonzales"}),e.jsx(c,{className:"text-red-600 text-sm py-1 ",name:"lastName",component:"div"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap -mx-3",children:[e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"role",className:"text-xs font-semibold px-1",children:"Tipo docente"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(d,{as:"select",id:"docentType",name:"docentType",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"jdoe@gmail.com",children:[e.jsx("option",{value:"",children:"Elige un tipo"}),e.jsx("option",{value:"Tiempo Completo",children:"Tiempo completo"}),e.jsx("option",{value:"Planta",children:"Planta"}),e.jsx("option",{value:"Cátedra",children:"Cátedra"}),e.jsx("option",{value:"Cátedra",children:"Otro"})]}),e.jsx(c,{className:"text-red-600 text-sm py-1",name:"docentType",component:"div"})]})]}),e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"title",className:"text-xs font-semibold px-1",children:"Título"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"text",id:"title",name:"title",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"Magister"}),e.jsx(c,{className:"text-red-600 text-sm  pt-1",name:"title",component:"div"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap -mx-3",children:[e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"id",className:"text-xs font-semibold px-1",children:"Identificación"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"text",id:"identification",name:"identification",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"100986587"}),e.jsx(c,{className:"text-red-600 text-sm  pt-1",name:"identification",component:"div"})]})]}),e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"idType",className:"text-xs font-semibold px-1",children:"Tipo de identificación"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(d,{as:"select",id:"idType",name:"idType",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"CC",children:[e.jsx("option",{value:"",children:"Elige una opción"}),e.jsx("option",{value:"CC",children:"CC"}),e.jsx("option",{value:"CE",children:"Cédula extranjera"}),e.jsx("option",{value:"PA",children:"Pasaporte"})]}),e.jsx(c,{className:"text-red-600 text-sm pt-1",name:"idType",component:"div"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap -mx-3",children:[e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"email",className:"text-xs font-semibold px-1",children:"Email"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"email",id:"email",name:"email",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"jdoe@gmail.com"}),e.jsx(c,{className:"text-red-600 text-sm pt-1",name:"email",component:"div"})]})]}),e.jsxs("div",{className:"sm:w-1/2 w-full px-3 mb-2",children:[e.jsx("label",{htmlFor:"password",className:"text-xs font-semibold px-1",children:"Contraseña"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{type:"text",id:"password",name:"password",className:"w-full  pl-3 pr-3 py-0.5  rounded-lg border-2 border-gray-200 outline-none focus:border-indigo-500",placeholder:"123456"}),e.jsx(c,{className:"text-red-600 text-sm pt-1",name:"password",component:"div"})]})]})]}),e.jsx("div",{className:"w-full mt-2",children:e.jsx("button",{type:"submit",disabled:i.isPending,className:`block w-full max-w-xs mx-auto  bg-indigo-500 hover:bg-indigo-700  text-white rounded-lg py-2  font-semibold ${i.isPending?"opacity-50":""}`,children:i.isPending?e.jsxs("p",{children:["Guardando ",e.jsx(U,{})]}):"Agregar"})})]})]})})})]})};export{te as default};
